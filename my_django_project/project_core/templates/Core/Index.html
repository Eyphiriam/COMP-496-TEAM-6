{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Upload - CT-NeuroNet</title>
    <style>
        /* Global Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #ffffff; /* White background */
            line-height: 1.6;
            color: #333; /* Dark text for readability */
        }

        h1, h2, p {
            margin: 0 0 20px;
            color: #333;
        }

        a {
            color: #4CAF50;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Header Styles */
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px;
            background-color: #252525; /* Dark background for contrast */
            color: #fefcce; /* Light text color */
            font-size: 30px;
            position: relative;
            text-align: center;
        }

        .header img {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 100px;
            height: auto;
        }

        /* Make the title text gold */
        .header h1 {
            color: #fefcce; /* Gold color */
        }

        /* Make the subtitle text gold */
        .header p {
            color: #fefcce; /* Gold color */
        }

        /*For Uploaded image preview to fit a small area*/
        .preview img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
            margin-top: 10px;
            display: block;
        }


        /* Main Content Styles */
        .content {
            display: flex;
            justify-content: space-between;
            padding: 40px;
            background-color: #ffffff; /* White background for content */
        }

        .container {
            max-width: 800px;
            margin: 40px auto; /* Auto margins to center the container */
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center; /* Center the text */
        }

        /* Center the title inside .container */
        .container h1 {
            color: #252525; /* Dark color for the heading */
            margin-bottom: 20px;
        }

        .container p {
            color: #555;
            margin-bottom: 15px;
            text-align: justify; /* Optional: Adds justified alignment to the paragraph text */
        }

        .how-it-works, .contact-us {
            width: 48%;
            padding: 20px;
            background-color: #fefcce; /* Light background for these sections */
            color: #333; /* Dark text for readability */
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .how-it-works h2, .contact-us h2 {
            text-align: center;
            color: #252525; /* Dark text color for headers */
        }

        .how-it-works p, .contact-us p {
            color: #333;
        }

        /* Image Upload Section */
        .upload-container {
            background-color: #f8f5f5; /* White background for upload container */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            margin: 40px auto;
            text-align: center;
        }

        .upload-container h2 {
            color: #333;
        }

        .upload-container input[type="file"] {
            display: block;
            margin: 20px auto;
        }

        .preview img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .button-container button {
            background-color: #fefcce;
            color: rgb(10, 9, 9);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 30%;
        }

        .button-container button:hover {
            background-color: #02612e;
        }

        /* Container for content inside .how-it-works section */
        .left-stanza p {
            color: #333;
        }

        /* Contact List Styles */
        .contact-us ul {
            list-style: none;
            padding: 0;
        }

        .contact-us li {
            margin-bottom: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
                padding: 20px;
            }

            .how-it-works, .contact-us {
                width: 100%;
                margin-bottom: 20px;
            }

            .button-container {
                flex-direction: column;
                align-items: center;
            }

            .button-container button {
                width: 100%;
                margin-bottom: 10px;
            }
            /*slideshow formattng*/
            .slideshow-container img {
                width: 100%;
                height: auto; /* Maintain aspect ratio */
                border-radius: 10px; /* Optional for aesthetics */
            }

        }
    </style>
</head>

<body>
    <!-- Header Section -->
    <div class="header">
        <img src="{% static 'images/CTNeuroNetLogo.png' %}" alt="CT-NeuroNet Logo">
        <div>
            <h1>CT-NeuroNet</h1>
            <p>COVID-19 Detector</p>
        </div>
    </div>

    <!-- Slideshow Section -->
<div class="slideshow-container">
        <div class="slides fade">
            <img src="{% static 'images/image1.jpg' %}" style="width:100%" style="height:100%" alt="Slide 1">
        </div>
        <div class="slides fade">
            <img src="{% static 'images/image2.jpg' %}" style="width:100%" style="height:100%" alt="Slide 2">
        </div>
        <div class="slides fade">
            <img src="{% static 'images/image3.jpg' %}" style="width:100%" style="height:100%" alt="Slide 3">
        </div>
    </div>

    <!--Overview Section-->
    <div class="container">
        <h1>CT-NeuroNet Overview</h1>
        <p>
            CT-NeuroNet is an innovative application designed to analyze CT scans for COVID-19 detection using a sophisticated convolutional neural network (CNN) model. 
            Aimed at assisting healthcare professionals, this system provides reliable and efficient test results, allowing users to quickly access critical information. 
            With its user-friendly interface, CT-NeuroNet ensures peace of mind for individuals seeking clarity during uncertain times.
        </p>
        <p>
            The application enables users to upload their CT images and receive immediate results, making it a valuable tool for timely health assessments. The platform is built to cater to reputable health organizations, ensuring that results are monitored and verified. Ideally offered free of charge, CT-NeuroNet prioritizes affordability and user privacy, ensuring that sensitive health information is securely handled.
        </p>
        <p>
            In addition to its core functionality, CT-NeuroNet features a comprehensive interface that includes a Home page for easy navigation, an About page detailing the productâ€™s origins and development team, and a Contact page for user inquiries. By integrating advanced technology with a focus on user experience, CT-NeuroNet aims to empower individuals and healthcare providers in the ongoing fight against COVID-19 and future health crises.
        </p>
    </div>

    <!-- Main Content Section -->
    <div class="content">
        <!-- How It Works Section -->
        <div class="how-it-works">
            <h2>How It Works:</h2>
            <div class="left-stanza">
                <p>To get started, navigate to the Home page of the CT-NeuroNet application. Here, you'll find a "Get Started" button that provides a brief overview of the uploading process. Follow the instructions to understand how to submit your CT scan images.</p>
                <p>Next, select your CT image file by clicking the "Choose File" button. Once you have selected the appropriate file, click the "Upload" button to submit it for analysis. The system will process your image and provide results based on the trained CNN model.</p>
                <p>After processing, you'll be redirected to the Results page, where your COVID-19 test outcome will be displayed. If you wish to upload another image, you can do so by clicking the "Resubmit" button. Additionally, you can view your past results by selecting the "View History" option.</p>
                <p>For any questions or feedback, head over to the Contact page. There, you can fill out a simple form to reach out to our team, ensuring your experience is both informative and supportive.</p>
            </div>
        </div>

        <!-- Contact Us Section -->
        <div class="contact-us">
            <h2>Contact Us:</h2>
            <p>If you have any questions, feel free to reach out:</p>
            <ul>
                <li><strong>Email:</strong> <a href="mailto:meagbogl@aggies.ncat.edu">meagbogl@aggies.ncat.edu</a></li>
                <li><strong>Phone:</strong> <a href="tel:+13363347500">+1 (336) 334-7500</a></li>
                <li><strong>Email:</strong> <a href="mailto:jpowell@aggies.ncat.edu">jpowell@aggies.ncat.edu</a></li>
                <li><strong>Phone:</strong> <a href="tel:+13363347500">+1 (336) 334-7500</a></li>
                <li><strong>Email:</strong> <a href="mailto:jtruff@aggies.ncat.edu">jtruff@aggies.ncat.edu</a></li>
                <li><strong>Phone:</strong> <a href="tel:+13363347500">+1 (336) 334-7500</a></li>
                <li><strong>For More Information:</strong> <a href="https://easychair.org/publications/paper/FzLP">More Information!</a></li>
            </ul>
        </div>
    </div>




    <!-- JavaScript for File Preview -->
    <script>
        let slideIndex = 0;

        // Show initial slide
        showSlides();

        function showSlides() {
            let i;
            let slides = document.getElementsByClassName("slides");

            // Hide all slides
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }

            // Increment slide index
            slideIndex++;
            if (slideIndex > slides.length) {
                slideIndex = 1;
            }

            // Display the current slide
            slides[slideIndex - 1].style.display = "block";
            setTimeout(showSlides, 7000); // Change every 7 seconds
        }
      

        document.addEventListener('DOMContentLoaded', () => {
    const fileInput = document.getElementById('file-input');
    const preview = document.getElementById('image-preview');
    const uploadForm = document.getElementById('upload-form');

    // Image Preview
    fileInput.addEventListener('change', () => {
        const file = fileInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                preview.innerHTML = `<img src="${event.target.result}" alt="Image Preview">`;
            };
            reader.readAsDataURL(file);
        } else {
            preview.innerHTML = ""; // Clear preview if no file selected
        }
    });

    // Handle form submission
    uploadForm.addEventListener('submit', (event) => {
        event.preventDefault();

        const formData = new FormData(uploadForm);
        fetch('/upload/', {
            method: 'POST',
            body: formData,
        })
            .then((response) => response.json())
            .then((data) => {
                if (data.success) {
                    alert("Image uploaded successfully!");
                } else {
                    alert("Image upload failed. Please try again.");
                }
            })
            .catch((error) => {
                console.error("Error:", error);
            });
    });
});

    </script>

        <!-- Upload Section -->
        <div class="upload-container">
            <h2>Upload Your CT Image</h2>
            <form id="upload-form" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="file" id="file-input" name="image" accept="image/*">
                <div id="image-preview" class="preview"></div>
            </form>
    
            <div class="button-container">
                <button type ="submit" button id="upload-btn">Upload</button>
                <button type ="button" id="view-history-btn">View History</button>
                <button type ="button" id="resubmit-btn">Resubmit</button>
                <button type ="button" id="results-btn">Results</button>
            </div>
        </div>
    
        <script>
    // Image Preview Logic
    document.addEventListener('DOMContentLoaded', () => {
        const fileInput = document.getElementById('file-input');
        const preview = document.getElementById('image-preview');
        const uploadForm = document.getElementById('upload-form');
        
        fileInput.addEventListener('change', () => {
            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    preview.innerHTML = `<img src="${event.target.result}" alt="Image Preview">`;
                };
                reader.readAsDataURL(file);
            }
        });

        // Upload Button Functionality
        document.getElementById('upload-btn').addEventListener('click', () => {
            const formData = new FormData(uploadForm);

            fetch('/upload_image/', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                },
            })
            .then(response => response.json())
            .then(data => {
                console.log('Upload successful:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });

        // View History Button
        document.getElementById('view-history-btn').addEventListener('click', function() {
            fetch('/view_history/')
                .then(response => response.json())
                .then(data => {
                    alert('View History: ' + JSON.stringify(data));
                });
        });

        // Resubmit Button
        document.getElementById('resubmit-btn').addEventListener('click', function() {
            const formData = new FormData(uploadForm);
            fetch('/resubmit/', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                alert("Resubmitted successfully.");
            });
        });

        // Results Button
        document.getElementById('results-btn').addEventListener('click', function() {
            fetch('/results/')
                .then(response => response.json())
                .then(data => {
                    alert('Prediction Result: ' + data.result);
                });
        });
    });
</script>


</body>
</html>